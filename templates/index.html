{% extends 'base.html' %}


{% block content %}

<div class="data-table-container">
    <!-- 表格标题显示数据统计 -->
    <div class="table-title">
        <span class="title2">Found {{ movies|length }} Movies (showing all)</span>
    </div>

    <!-- 表格主体 -->
    <table class="movie-data-table">
        <thead>
            <tr>
                <th class="col-index">#</th>
                <th class="col-title">Movie Title</th>
                <th class="col-year">Release Year</th>
                <th class="col-actions">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for movie in movies %}
            <tr>
                <!-- 行号 -->
                <td class="row-number">{{ loop.index }}</td>
                
                <!-- 标题列 -->
                <td class="title-cell">
                    <div class="title-wrapper">
                        <span class="main-title">{{ movie.title }}</span>
                    </div>
                </td>
                
                <!-- 年份列 -->
                <td class="year-cell">
                    <span class="year-badge">{{ movie.year }}</span>
                </td>
                
                <!-- 操作列 -->
                <td class="action-cell">
                    <div class="action-buttons">
                        <a class="imdb-btn" 
                           href="https://www.imdb.com/find?q={{ movie.title }}" 
                           target="_blank" 
                           title="IMDb Search">
                           <i class="search-icon"></i>
						   IMDB
                        </a>
                        {% if current_user.is_authenticated %}
                        <a class="edit-btn" 
                           href="{{ url_for('edit', movie_id=movie.id) }}" 
                           title="Edit">
                           Edit
                        </a>
                        <form class="delete-form" method="post" 
                              action="{{ url_for('delete', movie_id=movie.id) }}">
                            <button class="delete-btn" 
                                    type="submit" 
                                    onclick="return confirm('Delete permanently?')"
                                    title="Delete">×</button>
                        </form>
                        {% endif %}
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<style>
/* 表格容器 */
.data-table-container {
    border: 1px solid #e0e0e0;
    border-radius: 8px;
    overflow: hidden;
}

/* 表格标题 */
.table-title {
    padding: 12px 16px;
    background: #f5f5f5;
    border-bottom: 1px solid #ddd;
    font-weight: 600;
}

/* 表格主体 */
.movie-data-table {
    width: 100%;
    border-collapse: collapse;
}

/* 表头样式 */
th {
    padding: 12px;
    background: #f8f9fa;
    border-bottom: 2px solid #dee2e6;
    text-align: left;
}

/* 数据行 */
td {
    padding: 12px;
    border-bottom: 1px solid #eee;
}

/* 斑马条纹效果 */
tr:nth-child(even) {
    background-color: #f9f9f9;
}

/* 交互效果 */
tr:hover {
    background-color: #f1f1f1;
}

/* 年份徽章 */
.year-badge {
    display: inline-block;
    padding: 4px 8px;
    background: #e9ecef;
    border-radius: 8px;
    font-size: 0.9em;
}

/* 操作按钮样式 */
.action-buttons {
    display: flex;
    gap: 4px;
}

.edit-btn, .delete-btn, .imdb-btn {
    cursor: pointer;
    padding: 2px 4px;
    border: 1px solid transparent;
    border-radius: 5px;
}

.imdb-btn {
    background: #f5c518;
    color: #000;
}

.edit-btn {
    background: #ffe066;
    color: #2d3436;
}

.delete-btn {
    background: #ff7675;
    color: white;
}

/* 列宽设置 */
.col-index { width: 5%; }
.col-title { width: 60%; }
.col-year { width: 15%; }
.col-actions { width: 20%; }
</style>

{% endblock %}
