/* [pages/database.css] 数据库页页面级样式（由 main/database.html 内联样式迁移） */

/* 页面局部变量 */
:root {
  --table-min-width: 1200px;
}

/* ===== 外层容器 ===== */
.data-table-container {
  max-width: 100%;
  margin: 0.5rem auto 2rem auto; /* 减少顶部边距，保持底部边距 */
  padding: 0 20px;
}

/* 表格外层：超过视口时允许横向滚动；不影响整体居中 */
.table-outer {
  overflow-x: auto;
}

/* 表格内层：在未达到视口宽度时保持表格居中，从中间向两边拓宽 */
.table-inner {
  display: flex;
  justify-content: center;
  min-width: 100%; /* 确保未触达视口宽度时也能撑满以实现可见居中 */
}

/* 统一的内容宽度容器：标题 + 表格共用同一内容宽度 */
.table-stack {
  width: max-content;   /* 宽度由内部内容（通常为表格）决定 */
  min-width: var(--table-min-width);    /* 与表格一致的最小宽度，保证对齐与密度 */
}

/* ===== 搜索表单容器与画布皮肤 ===== */
.search-form {
  /* ---------- 可调节参数 ---------- */
  --form-max-width: 1000px;        /* 控制表单最大宽度，避免在大屏幕上过宽 */
  --form-padding: 1.0rem;          /* 表单内边距，影响内容与边框的距离 */
  --form-gap: 1.0rem;              /* 表单项之间的垂直间距 */
  --border-width: 2px;             /* 表单整体边框粗细 */
  --border-radius: 10px;           /* 表单整体圆角半径 */

  /* 输入控件参数 */
  --input-height: 2rem;            /* 所有输入框/下拉框的统一高度（注意单位） */
  --input-padding: 0.2rem;         /* 输入框内文字与边框的间距 */
  --input-font-size: clamp(0.6rem, 1.0vw, 2.0rem); /* 响应式字体 */

  /* 按钮参数 */
  --btn-padding: 0.2rem 0.6rem;    /* 按钮内边距（上下 左右） */
  --btn-font-size: clamp(0.6rem, 1.2vw, 2.0rem); /* 按钮文字大小 */
  --btn-radius: 5px;               /* 按钮圆角半径 */

  /* ---------- 布局样式 ---------- */
  margin: 0.5rem auto 2rem auto;   /* 减少上边距，保持下边距 */
  max-width: var(--form-max-width); /* 应用最大宽度变量 */
  border: var(--border-width) solid #eee; /* 边框样式（颜色#eee） */
  border-radius: var(--border-radius); /* 应用圆角变量 */
  padding: var(--form-padding);     /* 内边距 */
  display: flex;                    /* 弹性布局 */
  flex-direction: column;           /* 垂直排列子元素 */
  gap: var(--form-gap);             /* 子元素间垂直间距 */
  background-color: white;          /* 注意：模板上已加行内白底，二者一致 */
  box-shadow: var(--card-shadow);
  padding: 2rem;                    /* 额外内边距 */
  margin-bottom: 2rem;
  position: relative;               /* 承载绝对定位的动画画布 */
  overflow: visible;                /* 允许下拉建议框超出表单显示，避免被裁剪 */
}

/* 量子电子动画画布（全覆盖卡片，不拦截交互） */
.hv-electrons {
  position: absolute;
  inset: 0;
  z-index: 0;
  pointer-events: none;
  opacity: .28; /* 稍低于429，避免干扰表单交互 */
}

/* ===== 基础搜索区域与建议浮层 ===== */
.basic-search {
  display: flex;                 /* 弹性布局使输入框和按钮横向排列 */
  gap: 0.5rem;                   /* 减小子元素间距 */
  position: relative;            /* 为子元素定位提供参考系 */
}
.basic-search input[type="text"] {
  flex: 1;                       /* 占据剩余所有空间 */
  height: 2.5rem;                /* 增加高度 */
  padding: 0.5rem 1rem;          /* 适当的内边距 */
  font-size: 1rem;               /* 字体大小 */
  border: 1px solid #D9E2F0;     /* 边框 */
  border-radius: 4px;            /* 减小圆角 */
  transition: border-color 0.1s; /* 边框颜色过渡动画 */
}
.basic-search input[type="text"]:focus {
  border-color: var(--primary-color); /* 加深边框颜色 */
  outline: none;               /* 移除浏览器默认轮廓线 */
  box-shadow: 0 0 4px rgba(0, 71, 171, 0.2); /* 添加发光效果 */
}

/* 搜索按钮样式 */
.basic-search .btn { height: 2.5rem; } /* [Deprecated 20250930] 仅保留高度对齐，其余视觉由 .btn 体系管理 */
/* Clear按钮特殊样式 */
/* [Deprecated 20250930] .basic-search .btn-clear 视觉覆盖已移除，使用 components/buttons.css 的 .btn-clear */
/* 搜索输入容器 */
.search-input-container { flex: 1; position: relative; }
/* 搜索建议 */
.search-suggestions {
  position: absolute;
  top: 100%; left: 0; right: 0;
  background: white;
  border: 1px solid #d1d5db;
  border-top: none;
  border-radius: 0 0 6px 6px;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  max-height: 300px;
  overflow-y: auto;
  z-index: 3000;               /* 提升层级，避免被表格或工具栏覆盖 */
}
#searchSuggestions { display: none; }
.suggestion-item { padding: 0.75rem 1rem; cursor: pointer; border-bottom: 1px solid #f3f4f6; transition: background-color 0.15s; }
.suggestion-item:hover, .suggestion-item.highlighted { background-color: #f8fafc; }
.suggestion-item:last-child { border-bottom: none; }
.suggestion-label { font-weight: 500; color: #374151; }
.suggestion-category { font-size: 0.75rem; color: #6b7280; margin-top: 0.25rem; }
.suggestion-highlight { background-color: #fef3c7; font-weight: 600; }

/* ===== 元素分析模态样式 ===== */
.analysis-modal {
  position: fixed;
  top: 0; left: 0; width: 100%; height: 100%;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 2000;
}
.analysis-content {
  background: white;
  border-radius: 8px;
  max-width: 600px;
  max-height: 80vh;
  overflow-y: auto;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
}
.analysis-header { display: flex; justify-content: space-between; align-items: center; padding: 1.5rem; border-bottom: 1px solid #e5e7eb; }
.analysis-header h3 { margin: 0; color: #374151; }
.close-btn { background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #6b7280; }
.analysis-body { padding: 1.5rem; }
.analysis-section { margin-bottom: 1.5rem; }
.analysis-section h4 { margin: 0 0 0.5rem 0; color: #374151; font-size: 1.1rem; }
.element-tags { display: flex; flex-wrap: wrap; gap: 0.5rem; margin: 0.5rem 0; }
.element-tag { background: #e5e7eb; color: #374151; padding: 0.25rem 0.75rem; border-radius: 4px; font-size: 0.875rem; font-weight: 500; }
.element-tag.similar { background: #dbeafe; color: #1e40af; cursor: pointer; transition: background-color 0.15s; }
.element-tag.similar:hover { background: #bfdbfe; }
.group-info { margin: 0.5rem 0; padding: 0.5rem; background: #f9fafb; border-radius: 4px; }

/* ===== 高级搜索样式 ===== */
.advanced-search { display: none; margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #edf2f7; }
.advanced-search.show { display: block; }
.search-row { display: flex; flex-direction: row; gap: 1.5rem; margin-bottom: 1rem; }
.search-row .search-group { flex: 1; }
.search-actions { display: flex; justify-content: flex-end; gap: 1rem; margin-top: 1.5rem; }
.search-actions button, .search-actions .clear-btn button { padding: 0.5rem 1.25rem; font-size: 0.95rem; border-radius: 4px; font-weight: 500; cursor: pointer; transition: all 0.2s; border: none; }
.search-actions .search-btn { background-color: var(--primary-color); color: white; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); }
.search-actions .search-btn:hover { background-color: var(--secondary-color); transform: translateY(-1px); }
.search-actions .clear-btn { text-decoration: none; }
.search-actions .clear-btn button { background-color: #f5f5f5; color: #555; border: 1px solid #e0e0e0; }
.search-actions .clear-btn button:hover { background-color: #e8e8e8; transform: translateY(-1px); }
/* 范围输入框 */
.range-inputs input { flex: 1; }
.range-inputs span { color: #666; font-weight: 500; }

/* ===== 搜索验证提示样式 ===== */
.search-alert {
  display: flex; align-items: center; justify-content: center;
  gap: 0.75rem; margin: 1rem auto; padding: 0.85rem 1.2rem;
  background-color: #fff4e5; border-left: 4px solid #ff9800;
  color: #663c00; border-radius: 4px; font-size: 0.95rem;
  animation: fadeIn 0.3s ease-in-out; max-width: 90%;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
}
#searchAlert { display: none; }
.search-alert i { color: #ff9800; font-size: 1.2rem; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }

/* ===== 筛选标签样式 ===== */
.search-info { margin: 1.5rem 0 0.5rem; width: 100%; padding: 0 1rem; }
.search-summary { font-size: 0.95rem; color: #64748b; margin-bottom: 0.75rem; font-weight: 500; }
.active-filters { display: flex; flex-wrap: wrap; gap: 10px; align-items: center; }
.filter-tag { display: flex; align-items: center; background-color: var(--light-bg); border: 1px solid #D9E2F0; border-radius: 6px; padding: 0; font-size: 0.9rem; overflow: hidden; box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04); transition: all 0.2s; }
.filter-tag:hover { box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08); transform: translateY(-1px); }
.filter-key { background-color: rgba(0, 71, 171, 0.08); color: var(--primary-color); padding: 6px 10px; font-weight: 600; border-right: 1px solid #D9E2F0; }
.filter-value { padding: 6px 10px; color: #333; }
.remove-filter { display: flex; align-items: center; justify-content: center; padding: 6px 10px; color: #64748b; text-decoration: none; background-color: transparent; transition: all 0.2s; border-left: 1px solid #D9E2F0; }
.remove-filter:hover { background-color: #ffebee; color: #e53935; }
.clear-all-filters { color: var(--primary-color); font-size: 0.9rem; text-decoration: none; padding: 6px 12px; background-color: rgba(0, 71, 171, 0.08); border-radius: 6px; font-weight: 500; transition: all 0.2s; }
.clear-all-filters:hover { background-color: rgba(0, 71, 171, 0.15); text-decoration: underline; }

/* ===== 表格标题与工具栏、菜单 ===== */
.table-title { display: flex; align-items: center; justify-content: space-between; margin: 1.8rem 0 1rem; padding: 0 1rem 0.8rem 1rem; border-bottom: 1px solid #e2e8f0; width: 100%; white-space: nowrap; }
.title2 { color: var(--primary-color); font-weight: 600; font-size: 1.15rem; position: relative; padding-left: 1rem; }
.title2::before { content: ""; position: absolute; left: 0; top: 50%; transform: translateY(-50%); width: 4px; height: 1.1em; background-color: var(--primary-color); border-radius: 2px; }
.table-toolbar { display: flex; gap: 10px; align-items: center; }
/* [Deprecated 20250930] .btn.small 视觉已由 .btn--sm 统一提供；页面级覆盖删除 */
/* [Deprecated 20250913] 菜单基础样式已迁移至 components/menus.css（.menu, .menu-panel, .menu-item, .menu-title, @keyframes menuPop） */
.menu.per-page .menu-panel { width: 100px; min-width: 100px; max-width: 100px; }
.menu.per-page .menu-item { display: grid; grid-template-columns: 18px auto; align-items: center; gap: 8px; padding: 6px 22px 6px 8px; }
.menu.per-page .menu-item .item-icon { color: var(--primary-color); opacity: 0.9; }
.menu.per-page .menu-item .item-text { min-width: 0; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; color: #1f2a44; font-weight: 600; }
.menu.column-visibility .menu-panel { width: 360px; max-height: 360px; overflow-y: auto; overscroll-behavior: contain; }
.menu.column-visibility .menu-panel::-webkit-scrollbar { width: 10px; }
.menu.column-visibility .menu-panel::-webkit-scrollbar-track { background: #f1f5f9; border-radius: 10px; }
.menu.column-visibility .menu-panel::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
.menu.column-visibility .menu-panel::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
.menu-check { display: grid; grid-template-columns: auto 22px 1fr 22px; align-items: center; gap: 10px; padding: 10px 12px; line-height: 1.2; white-space: nowrap; max-width: 100%; border-radius: 8px; transition: background 0.12s ease; }
.menu-check:hover { background: #f2f6ff; }
.menu-check input { justify-self: start; }
.menu-check .field-icon { color: var(--primary-color); opacity: 0.9; }
.menu-check-text { min-width: 0; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; color: #1f2a44; font-weight: 600; }
.menu-check .field-visibility { color: #64748b; transition: color 0.12s, transform 0.12s; }
.menu-check input:checked ~ .field-visibility { color: var(--primary-color); transform: scale(1.06); }
.menu-actions { display: flex; justify-content: flex-end; padding-top: 6px; }
.col-remove { margin-left: 6px; border: none; background: transparent; color: #94a3b8; cursor: pointer; font-weight: 700; }
.col-remove:hover { color: #ef4444; }
.hidden { display: none !important; }
/* [Deprecated 20250930] #applyColsBtn.btn.small 专属视觉删除；如需强调，请在模板添加 btn--primary/btn--accent 等修饰类 */
.per-page-current {
  font-weight: 600;
  color: #ffffff; /* 在蓝色按钮背景上保持高对比度 */
  margin-left: 2px;
  text-shadow: 0 1px 0 rgba(0, 0, 0, 0.15); /* 轻微阴影增强可读性 */
}

/* ===== 表格样式与操作按钮 ===== */
/* [Deprecated 20250913] 表格基础样式已迁移至 components/tables.css（.material-data-table 基础、th/td、排序指示等） */
.material-data-table {
  width: max-content;   /* 随内容自然扩展，直至触达视口或滚动容器 */
  min-width: var(--table-min-width);    /* 最小宽度，保证初始视觉密度与易读性 */
}
.material-data-table td:last-child { text-align: center; }
.material-data-table tbody tr:nth-child(even) { background-color: #f8f9fa; }
.material-data-table tbody tr:nth-child(odd) { background-color: #ffffff; }
.material-data-table th, .material-data-table td { white-space: nowrap; }
.material-link { color: var(--primary-color); text-decoration: none; font-weight: 500; }
.material-link:hover { color: var(--secondary-color); }
.action-buttons { display: flex; justify-content: center; align-items: center; gap: 8px; flex-wrap: nowrap; }
.action-buttons form { display: inline-block; margin: 0; }
/* [Deprecated 20250930] 行内操作按钮视觉由 components/buttons.css 的 .btn 体系统一管理；
   此处不再覆盖 .action-buttons 下按钮的背景/边框/hover 等视觉。 */

/* ===== 指定列行为：ID 列严格单行展示 ===== */
.material-data-table th[data-col-key="id"],
.material-data-table td[data-col-key="id"] {
  white-space: nowrap;
  overflow-wrap: normal;
  word-break: normal;
}

/* ===== 其余数据列（除前四列）启用省略号，避免横向撑破布局 ===== */
.material-data-table td[data-col-key]:not([data-col-key="id"]):not([data-col-key="mp_id"]):not([data-col-key="name"]):not([data-col-key="space_group"]):not([data-col-key="actions"]) {
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 0; /* 允许列在布局中被压缩以显示省略号 */
}

/* ===== 分页样式 ===== */
.pagination { display: flex; justify-content: center; gap: 0.5rem; margin-top: 2rem; }
.pagination a { padding: 0.3rem 1rem; border-radius: 4px; text-decoration: none; color: var(--text-color); background-color: white; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05); transition: all 0.2s; font-weight: 500; border: 1px solid #e2e8f0; font-size: 0.9rem; }
.pagination a:hover { background-color: #f8fafc; color: var(--primary-color); border-color: var(--primary-color); transform: translateY(-1px); }
.pagination .active { background-color: var(--primary-color); color: white; border-color: var(--primary-color); box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); }

/* ===== HTA 专属表格增强：统一居中 & 列宽优化 ===== */
#hta-table th,
#hta-table td {
  text-align: center;
  vertical-align: middle;
}

/* Material 列：单行完整显示（必要时产生横向滚动，由外层容器承载） */
#hta-table th[data-col-key="Material"],
#hta-table td[data-col-key="Material"] {
  white-space: nowrap;
  overflow: visible;
  text-overflow: clip;
}

/* 放弃列宽压缩：保留默认宽度分配，由浏览器根据内容自适应 */

/* 取消对 HTA 表的全局省略号压缩，允许表格自然扩展并由外层滚动承载 */
#hta-table td[data-col-key] {
  max-width: none;
  overflow: visible;
  text-overflow: clip;
}

/* ===== 特殊性质筛选按钮 ===== */
.property-filters {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  margin-top: 0.1rem;
  padding: 0.4rem 0;
  border-top: 1px solid #edf2f7;
  border-bottom: 1px solid #edf2f7;
}

.filter-label-toggle {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0.6rem;
  background-color: rgba(0, 71, 171, 0.08);
  border: 1px solid rgba(0, 71, 171, 0.16);
  border-radius: 0.75rem;
  padding: 0.65rem 1rem;
  font-size: 1.05rem;
  font-weight: 600;
  color: #123b78;
  cursor: pointer;
  transition: background-color 0.18s ease, border-color 0.18s ease, box-shadow 0.18s ease;
}

.filter-label-toggle i {
  transition: transform 0.2s ease;
}

.filter-label-toggle:hover {
  background-color: rgba(0, 71, 171, 0.14);
  border-color: rgba(0, 71, 171, 0.22);
}

.filter-label-toggle:focus-visible {
  outline: 2px solid transparent;
  box-shadow: 0 0 0 3px rgba(17, 87, 170, 0.22);
}

.filter-label-toggle[aria-expanded="false"] i {
  transform: rotate(180deg);
}

.property-filter-options {
  display: flex;
  flex-wrap: wrap;
  gap: 0.6rem;
}

.property-filters.collapsed .property-filter-options {
  display: none;
}

.btn-prop-filter {
  /* Rebuilding base styles */
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  text-decoration: none;
  user-select: none;
  
  /* Applying new design */
  position: relative;
  min-width: 6.25rem;
  padding: 0.55rem 1.25rem;
  border-radius: 0.75rem;
  border: 1px solid transparent;
  background-color: #ffffff;
  color: var(--primary-color);
  font-weight: 600;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
  transition: background-color 0.18s ease, border-color 0.18s ease, box-shadow 0.18s ease, color 0.18s ease, font-weight 0.18s ease;
}

.btn-prop-filter:hover:not(.active) {
  font-weight: 700;
  border-color: var(--primary-color);
}

.btn-prop-filter.active {
  background-color: rgba(154, 132, 204, 0.92);
  color: #ffffff;
  font-weight: 700;
  border-color: transparent;
  box-shadow: 0 4px 12px rgba(122, 94, 184, 0.22);
}

.btn-prop-filter.active:hover {
  background-color: rgba(140, 115, 198, 0.95);
  border-color: transparent;
}

.btn-prop-filter:focus-visible {
  outline: 2px solid transparent;
  box-shadow: 0 0 0 3px rgba(0, 71, 171, 0.24);
}
