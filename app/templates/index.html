{% extends 'base.html' %}

{% block content %}
<div class="data-table-container">
    <div class="table-title">
        <span class="title2">Found {{ materials|length }} Materials</span>
    </div>

    <table class="material-data-table">
        <thead>
            <tr>
                <th>#</th>
                <th>Material Name</th>
                <th>Fermi Level (eV)</th>
                <th>Total Energy (eV)</th>
                <th>Formation Energy (eV)</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for material in materials %}
            <tr>
                <td>{{ loop.index }}</td>
                <td>
                    <a href="{{ url_for('views.detail', material_id=material.id) }}" class="material-link">
                        <span class="title2">{{ material.name }}</span>
                    </a>
                </td>
                <td>{{ material.efermi }}</td>
                <td>{{ material.total_energy }}</td>
                <td>{{ material.formation_energy }}</td>
                <td>
                    <div class="action-buttons">
                        <a class="mp" 
                           href="https://materialsproject.org/materials/{{ material.name }}" 
                           target="_blank"
                           title="View in MP">
                           MP
                        </a>
                        {% if current_user.is_authenticated %}
                        <a class="btn" 
                           href="{{ url_for('views.edit', material_id=material.id) }}">
                           Edit
                        </a>
                        <form method="post" 
                              action="{{ url_for('views.delete', material_id=material.id) }}">
                            <button class="btn" 
                                    type="submit" 
                                    onclick="return confirm('Delete permanently?')">Delete</button>
                        </form>
                        {% endif %}
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<style>
.material-data-table {
    width: 100%;
    border-collapse: collapse;
}

/* 表格居中对齐 */
.material-data-table th,
.material-data-table td {
    text-align: center;
    vertical-align: middle;
    padding: 12px;
}

.material-data-table th {
    background: #f8f9fa;
    border-bottom: 2px solid #dee2e6;
}

.material-data-table td {
    border-bottom: 1px solid #eee;
}

/* 按钮容器布局 */
.action-buttons {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 8px;
    flex-wrap: nowrap;
}

/* 表单内联布局 */
.action-buttons form {
    display: inline-block;
    margin: 0;
}

.material-link {
    color: #3498db;
    text-decoration: none;
}

.material-link:hover {
    text-decoration: underline;
}
</style>
{% endblock %}