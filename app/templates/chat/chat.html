{% extends 'base.html' %}
{% block page_styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/pages/chat.css', v='20250929') }}">
{% endblock %}

{% block content %}
<div class="container" id="chat-container" aria-live="polite">
    <h1 class="chat-title"><i class="fas fa-comments"></i> {{ _('Chat') }}</h1>

    <div id="messages" class="messages" role="log"></div>

    <div class="chat-options">
        <div class="model-selector">
            <label for="model-select">{{ _('Model') }}:</label>
            <select id="model-select">
                <option value="deepseek-r1:14b" selected>DeepSeek (14b)</option>
                <option value="qwen2.5:7b">Qwen2.5 (7b)</option>
                <option value="qwen:14b">Qwen (14b)</option>
            </select>
        </div>
        <div class="thinking-toggle">
            <label for="show-thinking-checkbox">{{ _('Show thinking process') }}</label>
            <label class="toggle-switch">
                <input type="checkbox" id="show-thinking-checkbox">
                <span class="slider"></span>
            </label>
        </div>
    </div>


    <div class="chat-input">
        <textarea id="user-input" rows="3" placeholder="{{ _('Type your question here...') }}" aria-label="{{ _('Your Message') }}"></textarea>
        <div class="actions">
            <button id="send-btn" class="button-primary"><i class="fas fa-paper-plane"></i> {{ _('Send') }}</button>
            <button id="clear-btn" class="button-secondary"><i class="fas fa-broom"></i> {{ _('Clear') }}</button>
            <button id="export-btn" class="button-secondary"><i class="fas fa-download"></i> {{ _('Export') }}</button>
        </div>
    </div>
</div>

<script src="{{ url_for('static', filename='js/chat.js', v='20250929') }}"></script>
<script>
  // 注入当前语言到前端，便于请求携带（使用字符串避免静态检查误报）
  window.CURRENT_LOCALE = "{{ (current_locale or 'en') }}";
</script>
{% endblock %}
