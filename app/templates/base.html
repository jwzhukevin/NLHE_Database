<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NLHE Database - Nonlinear Hall Effect Materials Database</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        /* ========== 全局变量和基础样式 ========== */
        :root {
            /* Theme colors */
            --primary-color: #0047AB;    /* Cobalt blue - primary color */
            --secondary-color: #1E5CB3;   /* Lighter blue */
            --accent-color: #007FFF;      /* Sky blue - accent color */
            --text-color: #333333;        /* Dark gray text */
            --light-bg: #F5F8FF;          /* Very light blue background */
            
            /* Shadows and borders */
            --card-shadow: 0 4px 6px rgba(0, 0, 0, 0.08);
            --input-border: #D9E2F0;
            --input-focus: #0047AB;
            --button-hover: #003A8C;
            
            /* Spacing and font sizes */
            --spacing-xs: 0.25rem;    /* 4px */
            --spacing-sm: 0.5rem;     /* 8px */
            --spacing-md: 1rem;       /* 16px */
            --spacing-lg: 1.5rem;     /* 24px */
            --spacing-xl: 2rem;       /* 32px */
            
            /* Font sizes - using clamp for responsive sizing */
            --font-size-sm: clamp(0.75rem, 0.8vw, 0.875rem);
            --font-size-base: clamp(0.875rem, 1vw, 1rem);
            --font-size-lg: clamp(1rem, 1.2vw, 1.25rem);
            --font-size-xl: clamp(1.25rem, 1.5vw, 1.5rem);
            
            /* Button styles */
            --button-padding: 0.5rem 1rem;
            --button-radius: 0.375rem;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--light-bg);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        /* ========== 公共组件样式 ========== */
        /* 按钮基础样式 
         * 定义了网站通用的按钮样式
         * 使用CSS变量确保样式的一致性和可维护性
         * 包含了悬停效果和过渡动画
         */
        .btn {
            background-color: var(--primary-color); /* 使用主题色作为背景 */
            color: white; /* 按钮文字为白色 */
            text-decoration: none; /* 移除文字下划线 */
            padding: var(--button-padding); /* 使用预定义的内边距 */
            border-radius: var(--button-radius); /* 圆角边框 */
            transition: background-color 0.3s; /* 背景色变化动画 */
            cursor: pointer; /* 鼠标悬停时显示手型光标 */
            border: none; /* 移除边框 */
            font-weight: 500; /* 字体加粗程度 */
            display: inline-flex; /* 使用inline-flex布局便于对齐 */
            align-items: center; /* 垂直居中对齐 */
            gap: var(--spacing-sm); /* 元素之间的间距 */
            font-size: var(--font-size-base); /* 使用基础字体大小 */
        }

        /* 按钮悬停效果 */
        .btn:hover {
            background-color: var(--button-hover); /* 悬停时变暗 */
        }

        /* 输入框通用样式 
         * 适用于文本输入框、下拉选择框和文本区域
         * 包含了焦点状态的样式变化
         */
        input, select, textarea {
            width: 100%; /* 宽度占满容器 */
            padding: var(--spacing-sm); /* 内边距 */
            border: 1px solid var(--input-border); /* 边框样式 */
            border-radius: var(--button-radius); /* 圆角边框 */
            font-size: var(--font-size-base); /* 字体大小 */
            transition: border-color 0.3s; /* 边框颜色变化动画 */
        }

        /* 输入框获得焦点时的样式 */
        input:focus,
        select:focus,
        textarea:focus {
            outline: none; /* 移除默认的焦点轮廓 */
            border-color: var(--input-focus); /* 边框变为主题色 */
            box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.1); /* 添加柔和的阴影效果 */
        }
        
        /* 主内容区域样式 
         * 定义了页面主要内容的布局和间距
         */
        .main-content {
            padding-top: 64px; /* 顶部内边距与导航栏高度匹配 */
            min-height: calc(100vh - 350px); /* 最小高度确保页面填充 */
            margin-top: 0; /* 移除顶部外边距 */
            background-color: var(--light-bg); /* 使用浅色背景 */
        }

        /* 材料详情页面的特殊调整 */
        .main-content .material-detail-container {
            padding-top: 0; /* 移除顶部内边距 */
        }

        /* ========== Flash消息样式 ========== */
        /* Flash消息容器样式 */
        .flash-messages {
            padding: 0; /* 移除内边距 */
            background-color: var(--light-bg); /* 使用浅色背景 */
        }

        /* Flash消息内容容器样式 */
        .flash-messages .container {
            padding-top: 1rem; /* 顶部内边距 */
        }

        /* 单个Flash消息样式 */
        .flash-message {
            display: flex; /* 弹性布局 */
            justify-content: space-between; /* 两端对齐 */
            align-items: center; /* 垂直居中 */
            padding: 0.75rem 1rem; /* 内边距 */
            margin-bottom: 0.75rem; /* 底部外边距 */
            border-radius: 6px; /* 圆角 */
            animation: slideDown 0.3s ease-out; /* 滑入动画 */
        }

        /* Flash消息滑入动画定义 */
        @keyframes slideDown {
            from {
                transform: translateY(-20px); /* 初始位置 */
                opacity: 0; /* 初始透明 */
            }
            to {
                transform: translateY(0); /* 最终位置 */
                opacity: 1; /* 完全不透明 */
            }
        }

        /* 成功消息样式 */
        .flash-message.success {
            background-color: #d4edda; /* 浅绿色背景 */
            border-left: 4px solid #28a745; /* 绿色左边框 */
            color: #155724; /* 深绿色文字 */
        }

        /* 错误消息样式 */
        .flash-message.error {
            background-color: #f8d7da; /* 浅红色背景 */
            border-left: 4px solid #dc3545; /* 红色左边框 */
            color: #721c24; /* 深红色文字 */
        }

        /* 信息消息样式 */
        .flash-message.info {
            background-color: #d1ecf1; /* 浅蓝色背景 */
            border-left: 4px solid #17a2b8; /* 蓝色左边框 */
            color: #0c5460; /* 深蓝色文字 */
        }

        /* 消息内容样式 */
        .flash-message .message-content {
            display: flex; /* 弹性布局 */
            align-items: center; /* 垂直居中 */
            gap: 0.5rem; /* 元素间距 */
        }

        /* 消息图标样式 */
        .flash-message i {
            font-size: 1.25rem; /* 图标大小 */
        }

        /* 关闭按钮样式 */
        .close-flash {
            background: none; /* 无背景 */
            border: none; /* 无边框 */
            font-size: 1.25rem; /* 字体大小 */
            cursor: pointer; /* 鼠标指针样式 */
            color: inherit; /* 继承颜色 */
            opacity: 0.7; /* 初始透明度 */
            transition: opacity 0.2s; /* 透明度变化动画 */
        }

        /* 关闭按钮悬停效果 */
        .close-flash:hover {
            opacity: 1; /* 完全不透明 */
        }
    </style>
</head>
<body>
    <!-- ========== 导航栏 ========== -->
    <nav class="navbar">
        <div class="container nav-content">
            <a href="{{ url_for('views.landing') }}" class="logo"><i class="fas fa-database"></i> NLHE Database</a>
            <div class="nav-links">
                <a href="{{ url_for('views.index') }}">
                    <i class="fas fa-table"></i> Database
                </a>
                <a href="{{ url_for('articles.listing') }}">
                    <i class="fas fa-book"></i> Contents
                </a>
                <div class="dropdown">
                    <a href="#" class="dropdown-toggle" id="tools-dropdown">
                        <i class="fas fa-tools"></i> Tools <i class="fas fa-caret-down"></i>
                    </a>
                    <div class="dropdown-menu" id="tools-menu">
                        <a href="https://materialsproject.org/ml" target="_blank">
                            <i class="fas fa-brain"></i> MP Machine Learning
                        </a>
                        <a href="https://www.materialscloud.org/work/tools" target="_blank">
                            <i class="fas fa-cloud"></i> Materials Cloud Tools
                        </a>
                        <a href="https://nomad-lab.eu/nomad-lab/" target="_blank">
                            <i class="fas fa-atom"></i> NOMAD Laboratory
                        </a>
                    </div>
                </div>
                {% if current_user.is_authenticated and current_user.is_admin() %}
                <a href="{{ url_for('views.add') }}">
                    <i class="fas fa-plus"></i> Add
                </a>
                <a href="{{ url_for('views.settings') }}">
                    <i class="fas fa-cogs"></i> Settings
                </a>
                <a href="{{ url_for('views.logout') }}">
                    <i class="fas fa-sign-out-alt"></i> Logout (Admin)
                </a>
                {% elif current_user.is_authenticated %}
                <a href="{{ url_for('views.settings') }}">
                    <i class="fas fa-user-cog"></i> User Settings
                </a>
                <a href="{{ url_for('views.logout') }}">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </a>
                {% else %}
                <a href="{{ url_for('views.login') }}">
                    <i class="fas fa-sign-in-alt"></i> Login
                </a>
                {% endif %}
            </div>
        </div>
    </nav>

    <style>
        /* ========== 导航栏样式 ========== */
        /* 导航栏容器,固定在页面顶部 */
        .navbar {
            background-color: rgb(181, 222, 253);  /* 浅蓝色背景 */
            box-shadow: var(--card-shadow);        /* 添加阴影效果 */
            padding: var(--spacing-md) 0;          /* 上下内边距 */
            position: fixed;                       /* 固定定位 */
            width: 100%;                          /* 宽度100% */
            top: 0;                               /* 固定在顶部 */
            z-index: 1000;                        /* 确保导航栏在最上层 */
            margin-bottom: 0;                     /* 移除底部边距 */
        }

        /* 导航栏内容布局 */
        .nav-content {
            display: flex;                        /* 弹性布局 */
            justify-content: space-between;       /* 两端对齐 */
            align-items: center;                  /* 垂直居中 */
        }

        /* Logo样式 */
        .logo {
            font-size: var(--font-size-xl);       /* 大字体尺寸 */
            font-weight: 700;                     /* 加粗字体 */
            color: var(--primary-color);          /* 主题色 */
            text-decoration: none;                /* 移除下划线 */
        }

        /* 导航链接容器 */
        .nav-links {
            display: flex;                        /* 弹性布局 */
            gap: var(--spacing-xl);               /* 链接间距 */
            position: relative;                   /* 相对定位 */
        }

        /* 导航链接样式 */
        .nav-links a {
            color: var(--text-color);            /* 文字颜色 */
            text-decoration: none;                /* 移除下划线 */
            font-weight: 500;                     /* 中等字重 */
            padding: var(--spacing-sm) var(--spacing-md); /* 内边距 */
            border-radius: var(--button-radius);  /* 圆角边框 */
            transition: all 0.3s ease;            /* 过渡动画 */
            display: flex;                        /* 弹性布局 */
            align-items: center;                  /* 垂直居中 */
            gap: var(--spacing-sm);              /* 图标和文字间距 */
        }

        /* 导航链接悬停效果 */
        .nav-links a:hover {
            color: var(--primary-color);          /* 主题色 */
            background-color: var(--light-bg);    /* 浅色背景 */
        }

        /* 导航链接图标样式 */
        .nav-links a i {
            font-size: 1rem;                      /* 图标大小 */
        }

        /* ===== 下拉菜单样式 ===== */
        /* 下拉菜单容器 */
        .dropdown {
            position: relative;                    /* 相对定位 */
        }
        
        /* 下拉菜单触发按钮 */
        .dropdown-toggle {
            cursor: pointer;                       /* 鼠标指针 */
        }

        /* 下拉菜单列表 */
        .dropdown-menu {
            display: none;                         /* 默认隐藏 */
            position: absolute;                    /* 绝对定位 */
            top: 100%;                            /* 位于触发按钮下方 */
            left: 0;                              /* 左对齐 */
            background-color: rgb(181, 222, 253);  /* 与导航栏同色 */
            border-radius: var(--button-radius);   /* 圆角边框 */
            box-shadow: var(--card-shadow);        /* 阴影效果 */
            min-width: 240px;                      /* 最小宽度 */
            z-index: 1001;                         /* 确保显示在最上层 */
            flex-direction: column;                /* 垂直排列 */
            margin-top: 5px;                       /* 与触发按钮的间距 */
        }

        /* 下拉菜单项样式 */
        .dropdown-menu a {
            padding: var(--spacing-md);            /* 内边距 */
            border-radius: 0;                      /* 移除圆角 */
            width: 100%;                          /* 宽度100% */
        }

        /* 第一个菜单项圆角 */
        .dropdown-menu a:first-child {
            border-top-left-radius: var(--button-radius);
            border-top-right-radius: var(--button-radius);
        }

        /* 最后一个菜单项圆角 */
        .dropdown-menu a:last-child {
            border-bottom-left-radius: var(--button-radius);
            border-bottom-right-radius: var(--button-radius);
        }

        /* 下拉菜单项悬停效果 */
        .dropdown-menu a:hover {
            background-color: var(--light-bg);     /* 浅色背景 */
        }

        /* 显示下拉菜单 */
        .dropdown-menu.show {
            display: flex;                         /* 显示菜单 */
        }
        
        /* ===== 响应式设计 ===== */
        @media (max-width: 768px) {
            .nav-links {
                display: none;                     /* 在小屏幕上隐藏导航链接 */
            }
        }
    </style>

    <!-- ========== 主内容区域 ========== -->
    <div class="main-content">
        <!-- Flash Messages -->
        <div class="flash-messages">
            <div class="container">
                {% with messages = get_flashed_messages(with_categories=true) %}
                    {% if messages %}
                        {% for category, message in messages %}
                            <div class="flash-message {{ category }}">
                                <div class="message-content">
                                    <i class="fas {% if category == 'success' %}fa-check-circle{% elif category == 'error' %}fa-exclamation-circle{% else %}fa-info-circle{% endif %}"></i>
                                    <span>{{ message }}</span>
                                </div>
                                <button class="close-flash">&times;</button>
                            </div>
                        {% endfor %}
                    {% endif %}
                {% endwith %}
            </div>
        </div>

        {% block content %}{% endblock %}
    </div>

    <!-- ========== 页脚 ========== -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>NLHE Database</h3>
                    <p>Nonlinear Hall Effect Materials Database</p>
                    <p>Explore and discover novel nonlinear Hall effect materials</p>
                </div>
                <div class="footer-section">
                    <h3>Related Links</h3>
                    <ul>
                        <li><a href="https://gs.imr.ac.cn/" target="_blank">IMR Graduate School, CAS</a></li>
                        <li><a href="http://www.imr.cas.cn/" target="_blank">Institute of Metal Research, CAS</a></li>
                        <li><a href="https://www.cas.cn/" target="_blank">Chinese Academy of Sciences</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Contact Us</h3>
                    <p>Address: 72 Wenhua Road, Shenhe District, Shenyang</p>
                    <p>Postal Code: 110016</p>
                    <p>Email: contact@nlhe-database.org</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 NLHE Database. Powered by <a href="https://github.com/pallets/flask">Flask</a> & <a href="https://github.com/jwzhukevin/watchlist">Code</a></p>
            </div>
        </div>
    </footer>

    <style>
        /* ========== 页脚样式 ========== */
        .footer {
            background-color: rgb(181, 222, 253);
            padding: var(--spacing-xl) 0;
            box-shadow: var(--card-shadow);
            font-size: var(--font-size-sm);
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-section h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-size: var(--font-size-lg);
        }

        .footer-section ul {
            list-style: none;
            padding: 0;
        }

        .footer-section ul li {
            margin-bottom: 0.5rem;
        }

        .footer-bottom {
            border-top: 1px solid var(--input-border);
            padding-top: 1.5rem;
            text-align: center;
        }

        .footer a {
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 500;
        }

        .footer a:hover {
            color: var(--secondary-color);
        }
    </style>
    
    <!-- ========== 下拉菜单和消息提示脚本 ========== -->
    <script>
        // 当DOM内容加载完成后执行脚本
        document.addEventListener('DOMContentLoaded', function() {
            // 获取工具下拉菜单相关元素
            const toolsDropdown = document.getElementById('tools-dropdown'); // 下拉按钮
            const toolsMenu = document.getElementById('tools-menu'); // 下拉菜单内容
            
            // 为下拉按钮添加点击事件监听器
            // 点击时切换菜单的显示状态
            toolsDropdown.addEventListener('click', function(e) {
                e.preventDefault(); // 阻止默认行为
                toolsMenu.classList.toggle('show'); // 切换show类来显示/隐藏菜单
            });
            
            // 点击页面其他区域时关闭下拉菜单
            // 这是一个常见的交互模式,提升用户体验
            document.addEventListener('click', function(e) {
                // 检查点击是否发生在下拉菜单区域外
                if (!toolsDropdown.contains(e.target) && !toolsMenu.contains(e.target)) {
                    toolsMenu.classList.remove('show'); // 隐藏菜单
                }
            });

            // 处理Flash消息关闭按钮的点击事件
            // 获取所有关闭按钮并为其添加事件监听器
            document.querySelectorAll('.close-flash').forEach(button => {
                button.addEventListener('click', function() {
                    const flashMessage = this.parentElement; // 获取消息元素
                    // 设置消息淡出和上移动画效果
                    flashMessage.style.opacity = '0';
                    flashMessage.style.transform = 'translateY(-20px)';
                    flashMessage.style.transition = 'opacity 0.3s, transform 0.3s';
                    
                    // 300毫秒后移除消息元素
                    setTimeout(() => {
                        flashMessage.remove();
                    }, 300);
                });
            });

            // 自动关闭Flash消息
            // 5秒后自动淡出所有Flash消息
            setTimeout(() => {
                document.querySelectorAll('.flash-message').forEach(message => {
                    if (message) {
                        // 设置消息淡出和上移动画效果
                        message.style.opacity = '0';
                        message.style.transform = 'translateY(-20px)';
                        message.style.transition = 'opacity 0.3s, transform 0.3s';
                        
                        // 300毫秒后移除消息元素
                        // 检查父元素是否存在以避免可能的错误
                        setTimeout(() => {
                            if (message.parentElement) {
                                message.remove();
                            }
                        }, 300);
                    }
                });
            }, 5000); // 5秒延迟
        });
    </script>
</body>
</html>

